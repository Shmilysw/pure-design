{"remainingRequest":"D:\\Java_project\\pure-design\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java_project\\pure-design\\vue\\src\\views\\File.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Java_project\\pure-design\\vue\\src\\views\\File.vue","mtime":1686997499105},{"path":"D:\\Java_project\\pure-design\\vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685880566717},{"path":"D:\\Java_project\\pure-design\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1685880569655},{"path":"D:\\Java_project\\pure-design\\vue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685880566716},{"path":"D:\\Java_project\\pure-design\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1685881029547}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzZXJ2ZXJJcCB9IGZyb20gIi4uLy4uL3B1YmxpYy9jb25maWciOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkZpbGUiLA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBzZXJ2ZXJJcDogc2VydmVySXAsDQogICAgICAgICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgICAgICAgbmFtZTogJycsDQogICAgICAgICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sDQogICAgICAgICAgICBwYWdlTnVtOiAxLA0KICAgICAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICAgICAgdG90YWw6IDANCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5sb2FkKCkNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgbG9hZCgpIHsNCiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5nZXQoIi9maWxlL3BhZ2UiLCB7DQogICAgICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwNCiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7DQoNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHMNCiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWwNCg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlRW5hYmxlKHJvdykgew0KICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnBvc3QoIi9maWxlL3VwZGF0ZSIsIHJvdykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGRlbChpZCkgew0KICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmRlbGV0ZSgiL2ZpbGUvIiArIGlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMjAwJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk5aSx6LSlIikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpDQogICAgICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsDQogICAgICAgIH0sDQogICAgICAgIGRlbEJhdGNoKCkgew0KICAgICAgICAgICAgbGV0IGlkcyA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubWFwKHYgPT4gdi5pZCkgIC8vIFt7fSwge30sIHt9XSA9PiBbMSwyLDNdDQogICAgICAgICAgICB0aGlzLnJlcXVlc3QucG9zdCgiL2ZpbGUvZGVsL2JhdGNoIiwgaWRzKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMjAwJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaJuemHj+WIoOmZpOaIkOWKnyIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5om56YeP5Yig6Zmk5aSx6LSlIikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICByZXNldCgpIHsNCiAgICAgICAgICAgIHRoaXMubmFtZSA9ICIiDQogICAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlU2l6ZSkNCiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZQ0KICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlTnVtKQ0KICAgICAgICAgICAgdGhpcy5wYWdlTnVtID0gcGFnZU51bQ0KICAgICAgICAgICAgdGhpcy5sb2FkKCkNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlRmlsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS4iuS8oOaIkOWKnyIpDQogICAgICAgICAgICB0aGlzLmxvYWQoKQ0KICAgICAgICB9LA0KICAgICAgICBkb3dubG9hZCh1cmwpIHsNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCkNCiAgICAgICAgfSwNCiAgICAgICAgcHJldmlldyh1cmwpIHsNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2ZpbGUua2VraW5nLmNuL29ubGluZVByZXZpZXc/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmJ0b2EoKHVybCkpKSkNCiAgICAgICAgfSwNCiAgICB9DQp9DQo="},{"version":3,"sources":["File.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"File.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"margin: 10px 0\">\r\n            <el-input style=\"width: 200px\" placeholder=\"请输入名称\" suffix-icon=\"el-icon-search\" v-model=\"name\"></el-input>\r\n            <el-button class=\"ml-5\" type=\"primary\" @click=\"load\">搜索</el-button>\r\n            <el-button type=\"warning\" @click=\"reset\">重置</el-button>\r\n        </div>\r\n        <div style=\"margin: 10px 0\">\r\n            <el-upload :action=\"'http://' + serverIp + ':9090/file/upload'\" :show-file-list=\"false\"\r\n                :on-success=\"handleFileUploadSuccess\" style=\"display: inline-block\">\r\n                <el-button type=\"primary\">上传文件 <i class=\"el-icon-top\"></i></el-button>\r\n            </el-upload>\r\n            <el-popconfirm class=\"ml-5\" confirm-button-text='确定' cancel-button-text='我再想想' icon=\"el-icon-info\"\r\n                icon-color=\"red\" title=\"您确定批量删除这些数据吗？\" @confirm=\"delBatch\">\r\n                <el-button type=\"danger\" slot=\"reference\">批量删除 <i class=\"el-icon-remove-outline\"></i></el-button>\r\n            </el-popconfirm>\r\n        </div>\r\n        <el-card>\r\n            <el-table :data=\"tableData\" border stripe :header-cell-class-name=\"'headerBg'\"\r\n                @selection-change=\"handleSelectionChange\">\r\n                <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n                <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"name\" label=\"文件名称\"></el-table-column>\r\n                <el-table-column prop=\"type\" label=\"文件类型\"></el-table-column>\r\n                <el-table-column prop=\"size\" label=\"文件大小(kb)\"></el-table-column>\r\n                <!-- <el-table-column label=\"预览\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" @click=\"preview(scope.row.url)\">预览</el-button>\r\n                    </template>\r\n                </el-table-column> -->\r\n                <el-table-column label=\"下载\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" @click=\"download(scope.row.url)\">下载</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"启用\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-switch v-model=\"scope.row.enable\" active-color=\"#13ce66\" inactive-color=\"#ccc\"\r\n                            @change=\"changeEnable(scope.row)\"></el-switch>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-popconfirm class=\"ml-5\" confirm-button-text='确定' cancel-button-text='我再想想' icon=\"el-icon-info\"\r\n                            icon-color=\"red\" title=\"您确定删除吗？\" @confirm=\"del(scope.row.id)\">\r\n                            <el-button type=\"danger\" slot=\"reference\">删除 <i class=\"el-icon-remove-outline\"></i></el-button>\r\n                        </el-popconfirm>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <div style=\"padding: 10px 0;display: flex;justify-content: center;\">\r\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pageNum\"\r\n                    :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { serverIp } from \"../../public/config\";\r\n\r\nexport default {\r\n    name: \"File\",\r\n    data() {\r\n        return {\r\n            serverIp: serverIp,\r\n            tableData: [],\r\n            name: '',\r\n            multipleSelection: [],\r\n            pageNum: 1,\r\n            pageSize: 10,\r\n            total: 0\r\n        }\r\n    },\r\n    created() {\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load() {\r\n            this.request.get(\"/file/page\", {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    name: this.name,\r\n                }\r\n            }).then(res => {\r\n\r\n                this.tableData = res.data.records\r\n                this.total = res.data.total\r\n\r\n            })\r\n        },\r\n        changeEnable(row) {\r\n            this.request.post(\"/file/update\", row).then(res => {\r\n                if (res.code === '200') {\r\n                    this.$message.success(\"操作成功\")\r\n                }\r\n            })\r\n        },\r\n        del(id) {\r\n            this.request.delete(\"/file/\" + id).then(res => {\r\n                if (res.code === '200') {\r\n                    this.$message.success(\"删除成功\")\r\n                    this.load()\r\n                } else {\r\n                    this.$message.error(\"删除失败\")\r\n                }\r\n            })\r\n        },\r\n        handleSelectionChange(val) {\r\n            console.log(val)\r\n            this.multipleSelection = val\r\n        },\r\n        delBatch() {\r\n            let ids = this.multipleSelection.map(v => v.id)  // [{}, {}, {}] => [1,2,3]\r\n            this.request.post(\"/file/del/batch\", ids).then(res => {\r\n                if (res.code === '200') {\r\n                    this.$message.success(\"批量删除成功\")\r\n                    this.load()\r\n                } else {\r\n                    this.$message.error(\"批量删除失败\")\r\n                }\r\n            })\r\n        },\r\n        reset() {\r\n            this.name = \"\"\r\n            this.load()\r\n        },\r\n        handleSizeChange(pageSize) {\r\n            console.log(pageSize)\r\n            this.pageSize = pageSize\r\n            this.load()\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            console.log(pageNum)\r\n            this.pageNum = pageNum\r\n            this.load()\r\n        },\r\n        handleFileUploadSuccess(res) {\r\n            console.log(res)\r\n            this.$message.success(\"上传成功\")\r\n            this.load()\r\n        },\r\n        download(url) {\r\n            window.open(url)\r\n        },\r\n        preview(url) {\r\n            window.open('https://file.keking.cn/onlinePreview?url=' + encodeURIComponent(window.btoa((url))))\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}